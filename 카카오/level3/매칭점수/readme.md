## 매칭 점수

> 프로그래머스 레벨 3, 카카오

### 풀이

[매칭점수](https://programmers.co.kr/learn/courses/30/lessons/42893?language=javascript)

1. 각 페이지당

   - 해당 페이지의 url
   - 해당 페이지에 연결된 urls
   - 해당 페이지의 index
   - 해당 페이지의 body

   를 구한다.

2. 각 점수를 구한다.

   - 기본점수: body에 적힌 word의 개수
     - **단어 단위**로 비교하여 word와 완전히 일치할 때만 세어준다.
   - 외부 링크 수: 연결된 urls의 개수
   - 링크 점수: 기본점수 / 외부 링크 수
     - 연결된 urls의 기본점수에 더해줄 점수

3. 가장 높은 점수를 가진 페이지의 index를 리턴한다.
   - 가장 높은 점수를 가진 페이지가 여러개라면 더 작은 index를 리턴한다.

큰 그림은 위와같이 그렸고, 말만 들으면 단순하지만 정규식을 사용해서 푼 문제라 정말 쉽지 않았다.. (어려웠음 ㅜㅜ)

1. 해당 페이지의 url을 구분하기 위한 정규식을 작성한다.

   - `<meta property="og:url" content="` 로 시작하며, `https://`로 시작하는 부분이 해당 페이지의 url이다.
   - `exec` 함수를 사용해서 url 이름을 따온다.

2. 해당 페이지에 연결된 urls를 구한다.

   - `<a href=`로 시작하는 태그들에 들어있다.
   - 얘도 마찬가지로 정규식을 사용해서 `a`태그에 적힌 url들을 가져온다.
   - 여러개일 수 있으므로 `matchAll`을 사용하는 것이 좋다.

3. 해당 페이지의 index를 저장한다.

4. 해당 페이지의 body를 구한다.

   - `<body>`에서 부터 `</body>`까지가 body에 해당하는 부분이고, 이 안에 검색어가 들어있다.
   - body에 해당하는 부분만 볼 수 있도록 잘라낸다.

5. 각 점수를 구한다.

   - 잘라낸 body 안에서 word와 일치하는 단어가 몇개인지 센다.
     - **단어 단위**로 비교하였을때 완벽하게 일치해야 하므로, **알파벳이 아닌 모든 문자열을 기준**으로 split하여 단어만 추려낸다.
     - word와 일치하는 것만 센다. => 기본점수
   - 기본점수에 연결된 urls의 개수를 나눈다.
     - 해당 페이지의 링크점수

6. 각 페이지당 위에서 구한 것들을 모두 저장한다.

   - (나의 경우) Object 형식으로 저장했다.
     - key: 해당 페이지의 url
     - value
       - 기본점수
       - 연결된 urls
       - index
       - 링크점수

7. Object의 key들을 하나씩 순회하면서 링크가 걸린 페이지의 링크점수를 더해준다.

   - 해당 페이지에 연결된 urls의 기본점수에 해당 페이지의 링크점수를 더해준다.

8. 기본점수가 가장 높은 페이지의 index를 반환한다.
   - 단, 가장 높은 기본점수를 가진 페이지가 여러개라면, 가장 작은 index를 반환한다.

#### 시행착오

1. 정규식을 공부하자
   - 사실 url 정규식을 혼자 해보다가 포기하고 구글링했다.
   - 다시 풀어보면서 이번엔 정규식을 좀 더 익혀봐야겠다.
2. 제한사항을 잘 읽자
   - 가장 높은 점수를 가진 페이지가 여러개일때 가장 작은 index를 반환한다는 조건을 제대로 보지 않아서 몇번이고 틀렸다.
   - 계속 안되어서 진짜 최악의 상황도 생각했다.. 예를들면 다른 태그도 있고, 그 태그의 클래스명이 word랑 같다거나.. ㅜㅜ
3. 사실 처음 문제 읽는 순간부터 숨이 막혔다 (ㅋㅋㅋ)
   - 카카오 진짜 너무 어렵당 ㅠ\_ㅠ
